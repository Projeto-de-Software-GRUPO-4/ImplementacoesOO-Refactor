<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Perfil</title>
    <link rel="stylesheet" href="../Geral/Styles/perfil.css">
</head>
<body>
    <header>
        <nav>
            <ul>
                <li><a id="link" href="aluno_function.html">Home</a></li>
                <li><a id="link" href="" onclick="perfil()">Perfil</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <div class="container" id="main">
            <h1>Insira os dados do aluno</h1>
            <!-- <fieldset id="_cpf">
                <legend>CPF: </legend>
                <input type="text" name="cpf" id="cpf" placeholder="Cpf do(a) aluno(a)">
            </fieldset> -->
            <fieldset id="password">
                <legend>Senha: </legend>
                <!-- <div class="xx">
                    <input type="password" name="senha" id="senha" placeholder="Senha atual">
                    <button type="button" id="mostrar" onclick="mostrarSenha()">&#x1F441</button>
                </div> -->
                <a id="alterar" href="" onclick="alterar()">Alterar senha</a>
            </fieldset>
            
            <div class="error"><p id="error"></p></div>
            <!-- <input type="button" value="Salvar" id="enviar" onclick="enviar()"> -->
        </div>
    </main>

    <script src="../Geral/Scripts/script.js"></script>
    <script>
        // document.getElementById("cpf").value = localStorage.getItem("usuario_id");

        function alterar(){
            var alterar = document.getElementById("alterar");

            localStorage.setItem("qm_chamou", "aluno");
            alterar.href = "../Geral/HTML/alterar_senha.html";
        }

        function compara(){
            var senha0 = document.getElementById('senha').value;
            var senha1 = document.getElementById('nova').value;
            var senha2 = document.getElementById('repita').value;
            var enviar = document.getElementById('enviar');

            if(senha0 == senha1 && senha0 !== "" && senha1 !== ""){
                document.getElementById('error').textContent = "A nova senha nao pode ser igual a senha atual!";
                return false;
            }else if(senha1 === senha2){
                document.getElementById('error').textContent = "";
                return true;
            }else{
                if(senha2 !== ""){
                    document.getElementById('error').textContent = "As senhas nao coincidem!";
                    return false;
                }
            }
        }

        function enviar(){
            var inputs = document.querySelectorAll("input");

            if(compara() === false){
                return;
            }else{
                for (var i = 0; i < inputs.length; i++) {
                    if(inputs[i].value === ""){
                        document.getElementById("error").textContent = "Preencha todos os campos!";
                        return;
                    }
                }

                // alert("Falta implementar o back para saber se a senha atual e igual a do DB");
                // alert("Dados alterados com sucesso!")
                // window.location.href = "aluno_function.html";
            }
        }
    </script>
</body>
</html>